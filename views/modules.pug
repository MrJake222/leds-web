extends layouts/mainMenu.pug

block head
    link(rel='stylesheet', href='css/modules.css')
    script(src="js/modules.js")
    //- script(src="js/range.js")
    //- script(src="js/ajax.js")

    script.
        function deleteModule(modID) {
            $.post("/modifyModule", {
                action: "delete",
                modID: modID
            }, function() {
                location.reload()
            });
        }

        function deleteGroup(groupID) {
            $.post("/modifyGroup", {
                action: "delete",
                groupID: groupID
            }, function() {
                location.assign("/")
            });
        }

    title= groupName

block main
    div.icons-right
        a.icon.delete(title="Delete group", onclick="deleteGroup('"+groupID+"')") x
        a.icon.add(title="Add module to this group", href="/modifyModule?action=groupAdd&groupID="+groupID) +
        a.icon(title="Duplicate group", href="/modifyGroup?action=Duplicate&groupID="+groupID) ⎘
        a.icon(title="Modify group", href="/modifyGroup?action=Modify&groupID="+groupID) ✎

    header= groupName
        //- span= groupName

    div.modules
        for mod in mods
            section
                    header.bold
                        div.icons-absolute.modAddress= toHex(mod.modAddress)
                        span(title="Address: "+mod.modAddress+"\nModel: "+mod.modModel)= mod.modName
                        div.icons-absolute.icons-absolute-right
                            a.icon.delete(title="Delete module", onclick="deleteModule('"+mod._id+"')") x
                            a.icon(title="Duplicate module", href="/modifyModule?action=Duplicate&modID="+mod._id) ⎘
                            a.icon(title="Modify module", href="/modifyModule?action=Modify&modID="+mod._id) ✎

                    div.canvasContainer.canvasContainerHeigth(id=mod._id)
                        canvas.hue(onmousedown="mouseDown(event)", ontouchstart="touchStart(event)", ontouchend="touchEnd(event)", data-value=mod.hue)

                        div.side
                            canvas.saturation(onmousedown="mouseDown(event)", ontouchstart="touchStart(event)", ontouchend="touchEnd(event)", data-value=mod.saturation)
                            canvas.lightness(onmousedown="mouseDown(event)", ontouchstart="touchStart(event)", ontouchend="touchEnd(event)", data-value=mod.lightness)


    script.
        initCanvas()